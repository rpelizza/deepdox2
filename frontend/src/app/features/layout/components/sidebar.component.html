<!-- Sidebar Mobile Overlay -->
@if (sidebarVisible()) {
	<div class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40" (click)="toggleSidebar.emit()"></div>
}

<!-- Sidebar Desktop -->
<aside
	class="hidden lg:block bg-white border-r border-gray-200 overflow-hidden transition-all duration-300 ease-in-out h-full flex-shrink-0"
	[class.w-64]="sidebarVisible()"
	[class.w-0]="!sidebarVisible()"
>
	<div class="h-full overflow-y-auto flex flex-col" [class.w-64]="sidebarVisible()" [class.w-0]="!sidebarVisible()">
		<!-- User Section -->
		@if (sidebarVisible()) {
			<div class="p-4 border-b border-gray-200">
				<div class="flex flex-col items-center gap-3">
					<img
						src="https://i.pravatar.cc/150?img=12"
						alt="Foto do usuário"
						class="w-16 h-16 rounded-full object-cover border-2 border-gray-200"
					/>
					<div class="text-center">
						<p class="font-semibold text-gray-900 text-sm">João Silva</p>
						<p class="text-xs text-gray-500 mt-1">Enterprise</p>
					</div>
				</div>
			</div>
		}

		<!-- Navigation -->
		@if (sidebarVisible()) {
			<nav class="flex-1 p-4 overflow-y-auto">
				<ul class="space-y-3">
					@for (item of menuItems; track item.label) {
						<li>
							<!-- Category Header -->
							<div class="flex items-center gap-3 px-4 py-2 mb-1">
								<i [class]="item.icon + ' text-primary-600'"></i>
								<span class="text-xs font-semibold text-gray-500 uppercase tracking-wide">{{
									item.label
								}}</span>
							</div>

							<!-- Category Children -->
							@if (item.children) {
								<ul class="space-y-1">
									@for (child of item.children; track child.label) {
										<li>
											<a
												[routerLink]="child.route || '#'"
												routerLinkActive="bg-primary-50 text-primary-600"
												[routerLinkActiveOptions]="{ exact: false }"
												class="flex items-center gap-3 pl-10 pr-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors"
											>
												<i [class]="child.icon"></i>
												<span>{{ child.label }}</span>
											</a>
										</li>
									}
								</ul>
							}
						</li>
					}
				</ul>
			</nav>
		}
	</div>
</aside>

<!-- Sidebar Mobile -->
<aside
	class="lg:hidden fixed left-0 top-0 h-full w-64 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out"
	[style.transform]="sidebarVisible() ? 'translateX(0)' : 'translateX(-100%)'"
>
	<div class="flex flex-col h-full">
		<!-- User Section -->
		<div class="p-4 border-b border-gray-200">
			<div class="flex items-center justify-between mb-3">
				<h2 class="text-lg font-semibold text-gray-900">Menu</h2>
				<button
					pButton
					type="button"
					icon="pi pi-times"
					class="p-button-text p-button-rounded"
					(click)="toggleSidebar.emit()"
					aria-label="Fechar menu"
				></button>
			</div>
			<div class="flex flex-col items-center gap-3 pt-2">
				<img
					src="https://i.pravatar.cc/150?img=12"
					alt="Foto do usuário"
					class="w-16 h-16 rounded-full object-cover border-2 border-gray-200"
				/>
				<div class="text-center">
					<p class="font-semibold text-gray-900 text-sm">João Silva</p>
					<p class="text-xs text-gray-500 mt-1">Enterprise</p>
				</div>
			</div>
		</div>

		<!-- Navigation -->
		<nav class="flex-1 overflow-y-auto p-4">
			<ul class="space-y-3">
				@for (item of menuItems; track item.label) {
					<li>
						<!-- Category Header -->
						<div class="flex items-center gap-3 px-4 py-2 mb-1">
							<i [class]="item.icon + ' text-primary-600'"></i>
							<span class="text-xs font-semibold text-gray-500 uppercase tracking-wide">{{
								item.label
							}}</span>
						</div>

						<!-- Category Children -->
						@if (item.children) {
							<ul class="space-y-1">
								@for (child of item.children; track child.label) {
									<li>
										<a
											[routerLink]="child.route || '#'"
											routerLinkActive="bg-primary-50 text-primary-600"
											[routerLinkActiveOptions]="{ exact: false }"
											class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors"
											(click)="toggleSidebar.emit()"
										>
											<i [class]="child.icon"></i>
											<span>{{ child.label }}</span>
										</a>
									</li>
								}
							</ul>
						}
					</li>
				}
			</ul>
		</nav>
	</div>
</aside>
